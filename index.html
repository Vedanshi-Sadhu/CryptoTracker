<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Tracker</title>
    <style>
        /* General Styles */
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f7f7f7;
            color: #444;
            line-height: 1.6;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        body.dark-theme {
            background-color: #333;
            color: #fff;
        }

        header {
            background-color: #89CFF0; /* Light pastel blue */
            color: #333;
            padding: 10px;
            text-align: center;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            height: 60px; /* Reduced height */
        }

        header h1 {
            font-size: 2rem; /* Reduced font size */
            font-weight: 600;
            margin: 0;
        }

        footer {
            background-color: #89CFF0; /* Light pastel blue */
            color: #333;
            text-align: center;
            padding: 10px;
            position: fixed;
            bottom: 0;
            width: 100%;
            border-radius: 15px 15px 0 0;
            height: 50px; /* Reduced height */
        }

        main {
            padding: 40px;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Preferences Section */
        .preferences-section {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }

        .preferences-section select, .preferences-section button {
            padding: 10px;
            font-size: 1rem;
            border-radius: 8px;
            border: 1px solid #ccc;
            cursor: pointer;
        }

        .preferences-section button {
            background-color: #6DC6E6; /* Soft light blue */
            color: white;
            border: none;
        }

        .preferences-section button:hover {
            background-color: #4FA3D1;
        }

        /* Crypto List Section */
        #cryptocurrency-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
        }

        .crypto-card {
            background-color: #ffffff;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease;
        }

        .crypto-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .crypto-card h3 {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 15px;
        }

        .crypto-card p {
            font-size: 1rem;
            margin-bottom: 10px;
        }

        /* Text Color for Price and 24h Change in Dark Mode */
        .crypto-card .crypto-price,
        .crypto-card .crypto-change {
            font-weight: bold;
            display: flex;
            align-items: center;
        }

        /* Arrow Styles for Price Change */
        .arrow {
            width: 20px;
            height: 20px;
            margin-left: 10px;
            transition: transform 0.3s ease;
        }

        .price-up {
            fill: #28a745; /* Green for price increase */
            transform: rotate(0deg);
        }

        .price-down {
            fill: #dc3545; /* Red for price decrease */
            transform: rotate(180deg); /* Flip the arrow */
        }

        body.dark-theme .crypto-card .crypto-price,
        body.dark-theme .crypto-card .crypto-change {
            color: #FFD700; /* Gold color for better visibility */
        }

        .crypto-card button {
            background-color: #6DC6E6; /* Soft light blue */
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .crypto-card button:hover {
            background-color: #4FA3D1; /* Slightly darker blue */
        }

        .favorite-button {
            background-color: #FF7B7B; /* Soft coral red */
        }

        .favorite-button:hover {
            background-color: #FF4D4D; /* Darker red */
        }

        /* Comparison Section */
        #comparison-section {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
        }

        .comparison-card {
            background-color: #ffffff;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease;
        }

        .comparison-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .comparison-card h3 {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 15px;
        }

        .comparison-card p {
            font-size: 1rem;
            margin-bottom: 10px;
        }

        .comparison-card button {
            background-color: #FF7B7B; /* Soft coral red */
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .comparison-card button:hover {
            background-color: #FF4D4D; /* Darker red */
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8rem; /* Reduced header size */
            }

            .crypto-card, .comparison-card {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Real-Time Cryptocurrency Tracker</h1>
    </header>

    <main>
        <section class="preferences-section">
            <select id="sort-cryptos">
                <option value="price">Sort by Price</option>
                <option value="market_cap">Sort by Market Cap</option>
                <option value="24h_change">Sort by 24h Change</option>
            </select>
            <button onclick="toggleDarkMode()">Toggle Dark Mode</button>
        </section>

        <section id="cryptocurrency-list">
            <h2>Cryptocurrency List</h2>
            <!-- Crypto items will appear here -->
        </section>

        <section id="comparison-section">
            <h2>Comparison</h2>
            <!-- Selected cryptocurrencies for comparison will appear here -->
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Crypto Tracker</p>
    </footer>

    <script>
        // Fetch cryptocurrency data from CoinGecko API
        const apiURL = 'https://api.coingecko.com/api/v3/coins/markets';
        const cryptocurrenciesList = document.getElementById('cryptocurrency-list');
        const comparisonList = document.getElementById('comparison-section');
        let selectedCryptosForComparison = JSON.parse(localStorage.getItem('selectedCryptosForComparison')) || []; // Retrieve from localStorage
        let selectedSortOption = localStorage.getItem('selectedSortOption') || 'price'; // Retrieve sorting option from localStorage

        // Apply dark mode preference from localStorage
        if (localStorage.getItem('darkModeEnabled') === 'true') {
            document.body.classList.add('dark-theme');
        }

        // Fetch function to retrieve cryptocurrencies data
        async function fetchCryptocurrencyData() {
            try {
                const response = await fetch(`${apiURL}?vs_currency=usd&order=${selectedSortOption}_desc&per_page=10&page=1`);
                const data = await response.json();
                displayCryptocurrencyData(data);
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }

        // Display the cryptocurrency list
        function displayCryptocurrencyData(cryptos) {
            cryptocurrenciesList.innerHTML = ''; // Clear existing content
            cryptos.forEach(crypto => {
                const cryptoCard = document.createElement('div');
                cryptoCard.classList.add('crypto-card');
                const priceChangeClass = crypto.price_change_percentage_24h > 0 ? 'price-up' : 'price-down';
                cryptoCard.innerHTML = `
                    <h3>${crypto.name} (${crypto.symbol.toUpperCase()})</h3>
                    <p class="crypto-price">Price: $${crypto.current_price.toFixed(2)} 
                        <svg class="arrow ${priceChangeClass}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M12 2l-6 6h4v8h4v-8h4z"/>
                        </svg>
                    </p>
                    <p class="crypto-change">24h Change: ${crypto.price_change_percentage_24h.toFixed(2)}%</p>
                    <p><button onclick="addCryptoToComparison('${crypto.id}', '${crypto.name}', '${crypto.symbol}', ${crypto.current_price}, ${crypto.price_change_percentage_24h}, ${crypto.market_cap})">Add to Compare</button></p>
                    <p><button class="favorite-button" onclick="toggleFavorite('${crypto.id}')">Favorite</button></p>
                `;
                cryptocurrenciesList.appendChild(cryptoCard);
            });
        }

        // Add selected cryptocurrency to comparison
        function addCryptoToComparison(cryptoId, name, symbol, price, change, marketCap) {
            if (selectedCryptosForComparison.length >= 5) {
                alert('You can only compare up to 5 cryptocurrencies.');
                return;
            }

            if (selectedCryptosForComparison.includes(cryptoId)) {
                alert('This cryptocurrency is already in your comparison list.');
                return;
            }

            selectedCryptosForComparison.push(cryptoId);
            localStorage.setItem('selectedCryptosForComparison', JSON.stringify(selectedCryptosForComparison)); // Save to localStorage
            const comparisonCard = document.createElement('div');
            comparisonCard.classList.add('comparison-card');
            comparisonCard.id = `crypto-${cryptoId}`;
            comparisonCard.innerHTML = `
                <h3>${name} (${symbol.toUpperCase()})</h3>
                <p>Price: $${price.toFixed(2)}</p>
                <p>24h Change: ${change.toFixed(2)}%</p>
                <p>Market Cap: $${marketCap.toLocaleString()}</p>
                <p><button onclick="removeCryptoFromComparison('${cryptoId}')">Remove</button></p>
            `;
            comparisonList.appendChild(comparisonCard);
        }

        // Remove cryptocurrency from comparison
        function removeCryptoFromComparison(cryptoId) {
            const comparisonCard = document.getElementById(`crypto-${cryptoId}`);
            if (comparisonCard) {
                comparisonList.removeChild(comparisonCard);
                selectedCryptosForComparison = selectedCryptosForComparison.filter(id => id !== cryptoId); // Remove from the array
                localStorage.setItem('selectedCryptosForComparison', JSON.stringify(selectedCryptosForComparison)); // Save updated list
            }
        }

        // Toggle Dark Mode
        function toggleDarkMode() {
            document.body.classList.toggle('dark-theme');
            const darkModeEnabled = document.body.classList.contains('dark-theme');
            localStorage.setItem('darkModeEnabled', darkModeEnabled); // Save dark mode preference to localStorage
        }

        // Change Sorting Options
        document.getElementById('sort-cryptos').addEventListener('change', function() {
            selectedSortOption = this.value;
            localStorage.setItem('selectedSortOption', selectedSortOption); // Save sorting option to localStorage
            fetchCryptocurrencyData();
        });

        // Load the initial data when the page loads
        window.onload = fetchCryptocurrencyData;
    </script>
</body>
</html>
